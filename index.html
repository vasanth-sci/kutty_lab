<!DOCTYPE html>
<html lang="en">
    
<head>

    


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dozer Lab | Field visualizer </title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://js.puter.com/v2/"></script>
    


    <link rel="stylesheet" href="style.css">
    <style>
        canvas { width: 100% !important; height: 100% !important; outline: none; }
        .fullscreen-mode {
            position: fixed !important; top: 0 !important; left: 0 !important;
            width: 100vw !important; height: 100vh !important;
            z-index: 100 !important; border-radius: 0 !important; margin: 0 !important;
        }
    </style>
</head>
<body id="mainBody" class="bg-slate-50 text-slate-900 font-sans transition-colors duration-500 overflow-hidden">

<div class="flex flex-col h-screen scale-in overflow-hidden">


  <header class="bg-white border-b px-4 py-3 flex justify-between items-center shadow-sm z-10 dark-target flex-shrink-0">
    <h1 class="text-lg font-bold flex items-center gap-2">
        <span>üê∑</span>
        <span class="bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">Dozer Lab</span>
    </h1>
    <div class="flex gap-2">
        <button onclick="toggleModal()" class="p-2 rounded-full bg-slate-100 border border-slate-200 hover:bg-indigo-50 transition-colors" title="How to use">‚ÑπÔ∏è</button>
        <button onclick="toggleDarkMode()" class="p-2 rounded-full bg-slate-100 border border-slate-200" id="themeBtn">üåô</button>
    </div>
</header>

    <div class="flex flex-1 flex-col lg:flex-row overflow-y-auto lg:overflow-hidden">
        <aside class="w-full lg:w-80 bg-white border-r p-6 dark-target overflow-y-auto custom-scrollbar">
            <div class="space-y-6">
                <div>
                    <label class="block text-xs font-black text-slate-400 uppercase mb-2">Scalar Field</label>
                    <input id="scalar" value="sin(x) * cos(y)" class="w-full p-3 rounded-xl border border-slate-200 outline-none focus:ring-2 focus:ring-indigo-500 dark-input">
                </div>
                <div>
                    <label class="block text-xs font-black text-slate-400 uppercase mb-2">Vector Field</label>
                    <input id="vector" value="[y, -x]" class="w-full p-3 rounded-xl border border-slate-200 outline-none focus:ring-2 focus:ring-indigo-500 dark-input">
                </div>
                <div>
                    <label class="block text-xs font-black text-slate-400 uppercase mb-2">Color Palette</label>
                    <select id="colorScale" class="w-full p-3 rounded-xl border border-slate-200 bg-white dark-input">
                        <option value="Viridis">Viridis</option>
                        <option value="Hot">Thermal</option>
                        <option value="Cool">Cool</option>
                        <option value="Jet">Jet</option>
                        <option value="Sunset">Sunset (Warm)</option>
                    </select>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-xs font-black text-slate-400 mb-1">Vector Density: <span id="densityVal" class="text-indigo-600">10</span></label>
                        <input type="range" id="density" min="4" max="25" value="10" class="w-full accent-indigo-600">
                    </div>
                    <div>
                        <label class="block text-xs font-black text-slate-400 mb-1">Arrow Size: <span id="arrowSizeVal" class="text-indigo-600">0.6</span></label>
                        <input type="range" id="arrowSize" min="0.0" max="2.0" step="0.1" value="0.6" class="w-full accent-indigo-600">
                    </div>
                   <div class="flex flex-col gap-1">
    <label class="block text-xs font-black text-slate-400 mb-1">3D Scatter Density: <span id="markerDensityVal" class="text-indigo-600">25</span></label>
    <input type="range" id="markerDensity" min="5" max="50" value="25" class="w-full accent-indigo-600">
</div> 
                    <div>
                        <label class="block text-xs font-black text-slate-400 mb-1">Dot Size: <span id="markerSizeVal" class="text-indigo-600">0.15</span></label>
                        <input type="range" id="markerSize" min="0.1" max="1" step="0.01" value="0.45" class="w-full accent-indigo-600">
                    </div>

<div>
    <label class="block text-xs font-black text-slate-400 mb-1">Flow Speed: <span id="flowSpeedVal" class="text-indigo-600">1.0</span></label>
    <input type="range" id="flowSpeed" min="0.1" max="5.0" step="0.1" value="1.0" class="w-full accent-indigo-600">
</div>

<div class="pt-4 border-t border-slate-100 dark:border-slate-800">
    <div class="flex justify-between items-center mb-3">
        <label class="block text-xs font-black text-slate-400">Manual Particle</label>
        <button id="clearManualBtn" class="text-slate-400 hover:text-red-500 transition-colors" title="Clear all manual particles">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
            </svg>
        </button>
    </div>
    <div class="grid grid-cols-3 gap-2 mb-3">
        <input id="manualX" type="number" step="0.1" value="0" class="p-2 text-xs rounded-lg border border-slate-200 dark-input" placeholder="X">
        <input id="manualY" type="number" step="0.1" value="0" class="p-2 text-xs rounded-lg border border-slate-200 dark-input" placeholder="Y">
        <input id="manualZ" type="number" step="0.1" value="0" class="p-2 text-xs rounded-lg border border-slate-200 dark-input" placeholder="Z">


    </div>
    <button id="addParticleBtn" class="w-full py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold rounded-xl transition-all shadow-md">
        üìç DROP PARTICLE
    </button>
</div>

<div class="flex items-center gap-2 mb-3">
    <input type="checkbox" id="enableTrace" class="w-4 h-4 accent-indigo-600">
    <label for="enableTrace" class="text-[10px] font-black text-slate-600 uppercase"> Streamline Trace</label>
</div>


                </div>
            </div>
        </aside>

        <main class="flex-1 grid grid-cols-1 lg:grid-cols-2 p-3 gap-3 bg-slate-100 dark-target-bg">
            <div id="scalarCont" class="bg-white dark:bg-slate-900 rounded-3xl overflow-hidden shadow-xl border relative">
                <div class="absolute top-4 left-4 z-10 flex gap-2">
                    <span class="text-[10px] font-bold text-white/70 bg-black/60 px-2 py-1 rounded-full">SCALAR</span>
                    <button onclick="toggleFullScreen('scalarCont')" class="text-[10px] font-bold text-white/70 bg-black/60 px-2 py-1 rounded-full hover:bg-indigo-600">‚õ∂</button>
                </div>
                <div id="scalarLegend" class="absolute top-4 right-4 z-20"></div>
                <div id="scalarPlot" class="w-full h-full"></div>
            </div>
            <div id="vectorCont" class="bg-white dark:bg-slate-900 rounded-3xl overflow-hidden shadow-xl border relative">
                <div class="absolute top-4 left-4 z-10 flex gap-2">
                    <span class="text-[10px] font-bold text-white/70 bg-black/60 px-2 py-1 rounded-full">VECTOR</span>
                    <button onclick="toggleFullScreen('vectorCont')" class="text-[10px] font-bold text-white/70 bg-black/60 px-2 py-1 rounded-full hover:bg-indigo-600">‚õ∂</button>
                     <div class="absolute top-10 right-6 z-10">
    <button id="flowToggle" class="bg-black/60 hover:bg-indigo-600 text-white text-[10px] font-bold px-3 py-2 rounded-full backdrop-blur-md transition-all border border-white/10">
        ‚ú® FLOW: OFF
    </button>
</div>



                </div>
                <div id="vectorLegend" class="absolute top-4 right-4 z-20"></div>
                <div id="vectorPlot" class="w-full h-full"></div>
            </div>
        </main>
    </div>
</div>
<script src="script.js"></script>



<div id="infoModal" class="hidden fixed inset-0 z-[200] flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-md"></div>
    
    <div class="relative bg-white dark:bg-slate-900 w-full max-w-3xl rounded-[2rem] shadow-2xl border border-white/20 overflow-hidden transform transition-all">
        <div class="grid grid-cols-1 md:grid-cols-5 h-full">
            
            <div class="hidden md:flex col-span-2 bg-indigo-600 p-10 flex-col justify-between text-white">
                <div>
                    <h2 class="text-3xl font-black leading-tight">Quick Start<br>Guide</h2>
                    <p class="mt-4 text-indigo-100 text-sm leading-relaxed">Master the tools of Dozer Lab to visualize complex vector and scalar fields.</p>
                </div>
            </div>

            <div class="col-span-3 p-8 md:p-12 max-h-[80vh] overflow-y-auto custom-scrollbar">
                <div class="space-y-10">
                    
                    <section>
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 flex items-center justify-center text-xs font-bold">01</span>
                            <h3 class="font-black text-slate-900 dark:text-white uppercase tracking-tighter">Defining Your Fields</h3>
                        </div>
                        <ul class="space-y-2 pl-11 text-xs text-slate-500 dark:text-slate-400">
                            <li><b>Variables:</b> Use standard Cartesian coordinates (x, y, z)</li>
                            <li><b>Multiplication:</b> Always use * symbol (e.g., 2 * x instead of 2x)</li>
                            <li><b>Trigonometry:</b> For inverse functions, add 'a' prefix (e.g., asin(x), acos(y), atan(z))</li>
                            <li class="bg-slate-50 dark:bg-slate-800 p-2 rounded-lg font-mono text-indigo-600 mt-2">2 * x + asin(y) * cos(z)</li>
                        </ul>
                    </section>

                    <section>
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-8 h-8 rounded-full bg-emerald-100 dark:bg-emerald-900/50 text-emerald-600 flex items-center justify-center text-xs font-bold">02</span>
                            <h3 class="font-black text-slate-900 dark:text-white uppercase tracking-tighter">Optimizing Performance</h3>
                        </div>
                        <p class="pl-11 text-xs text-slate-500 dark:text-slate-400 mb-3">Keep density settings within limits for smooth performance:</p>
                        <div class="grid grid-cols-2 gap-3 pl-11">
                            <div class="p-3 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-100 dark:border-slate-700">
                                <p class="text-[10px] text-slate-400 font-bold uppercase mb-1">3D Scatter</p>
                                <p class="text-lg font-black text-slate-700 dark:text-slate-200">&lt; 30</p>
                            </div>
                            <div class="p-3 bg-slate-50 dark:bg-slate-800 rounded-xl border border-slate-100 dark:border-slate-700">
                                <p class="text-[10px] text-slate-400 font-bold uppercase mb-1">Vector Density</p>
                                <p class="text-lg font-black text-slate-700 dark:text-slate-200">&lt; 10</p>
                            </div>
                        </div>
                    </section>

                    <section>
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900/50 text-purple-600 flex items-center justify-center text-xs font-bold">03</span>
                            <h3 class="font-black text-slate-900 dark:text-white uppercase tracking-tighter">Interactive Particle Dropping</h3>
                        </div>
                        <ul class="space-y-3 pl-11 text-xs text-slate-500 dark:text-slate-400">
                            <li class="flex items-start gap-2">
                                <span class="text-indigo-500">‚óè</span>
                                <span><b>Double-Click:</b> Double-click anywhere in the Vector Field plot to drop a particle at that location instantly.</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-indigo-500">‚óè</span>
                                <span><b>Manual Coordinates:</b> Enter specific X, Y, and Z values in the sidebar and click "DROP PARTICLE" for precision.</span>
                            </li>
                        </ul>
                    </section>

                    <section>
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-8 h-8 rounded-full bg-pink-100 dark:bg-pink-900/50 text-pink-600 flex items-center justify-center text-xs font-bold">04</span>
                            <h3 class="font-black text-slate-900 dark:text-white uppercase tracking-tighter">Streamlines & Animation</h3>
                        </div>
                        <ul class="space-y-3 pl-11 text-xs text-slate-500 dark:text-slate-400">
                            <li class="flex items-start gap-2">
                                <span class="text-indigo-500">‚óè</span>
                                <span><b>Trace Paths:</b> Enable "Streamline Trace" before dropping particles to visualize the permanent flow path.</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-indigo-500">‚óè</span>
                                <span><b>Bulk Flow:</b> Toggle the "FLOW" button to release animated particle clouds following the vector field.</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-indigo-500">‚óè</span>
                                <span><b>Speed Control:</b> Use the Flow Speed slider to adjust particle animation speed in real-time.</span>
                            </li>
                        </ul>
                    </section>
                </div>

                <button onclick="toggleModal()" class="w-full mt-10 py-4 bg-slate-900 dark:bg-white dark:text-slate-900 text-white rounded-2xl font-black uppercase tracking-widest text-xs hover:scale-[1.02] transition-transform active:scale-95 shadow-xl">
                    Acknowledge & Enter Lab
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Gemini AI -->
<div id="geminiChat">
    <div class="g-head">
        <div class="g-title">
            <div class="g-status"></div>
            <span>Dozer AI</span>
        </div>
        <button id="chatToggle" title="Minimize Chat">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
        </button>
    </div>

    <div id="gMessages">
        <div class="g-ai">Hello! I am connected to your vector field data. How can I assist you with your simulation today?</div>
    </div>
    
    <div class="g-input">
        <input id="gInput" type="text" placeholder="Ask about flow, math, or physics..." autocomplete="off" />
        <button id="gSend">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <line x1="22" y1="2" x2="11" y2="13"></line>
                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
        </button>
    </div>
</div>
<script src="script.js"></script>



</body>
</html>
